<!DOCTYPE html>
<html>
<head>
    <title>Binance Brief</title>
    <meta charset="UTF-8">
    <style>
        body { background: #0a0a0a; color: #f0b90b; font-family: Arial; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin:0; }
        .card { background: #1e1f25; padding: 40px; border-radius: 20px; width: 500px; border:1px solid #2c2f36; }
        input { width: 100%; padding: 15px; margin: 10px 0; background: #0c0f15; border: 1px solid #2c2f36; color: white; border-radius: 10px; }
        button { background: #f0b90b; color: black; padding: 15px; border: none; border-radius: 10px; font-weight: bold; width: 100%; cursor: pointer; }
        .link-box { background: #0c0f15; padding: 15px; border-radius: 10px; margin: 10px 0; word-break: break-all; }
    </style>
</head>
<body>
    <div class="card">
        <h2>üîä Binance Brief</h2>

        <!-- –®–∞–≥ 1: –í—Ö–æ–¥ (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å) -->
        <div id="step1">
            <input type="text" id="login" placeholder="–õ–æ–≥–∏–Ω" value="test1">
            <input type="password" id="pass" placeholder="–ü–∞—Ä–æ–ª—å" value="12345">
            <button onclick="checkLogin()">üöÄ –í–æ–π—Ç–∏</button>
        </div>

        <!-- –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã (–ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞) -->
        <div id="step2" style="display:none;">
            <p>–ü—Ä–∏–≤–µ—Ç, <span id="userName"></span>!</p>
            <button onclick="createRoom()">üéôÔ∏è –°–û–ó–î–ê–¢–¨ –ù–û–í–´–ô –ë–†–ò–§–ò–ù–ì</button>
            
            <!-- –ó–¥–µ—Å—å –ø–æ—è–≤–∏—Ç—Å—è —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ–º–Ω–∞—Ç—É -->
            <div id="roomLink" style="display:none;" class="link-box"></div>
        </div>
    </div>

    <script>
        // –¢–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ LiveKit
        const API_KEY = 'APIenU2zhEwG6cd';
        const API_SECRET = 'iUeO4vJX9VAlsUu8s6ps8Zm7iosIgTzNuww2euU2GMf';
        
        let currentUser = '';

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–Ω–∞
        function checkLogin() {
            const login = document.getElementById('login').value;
            const pass = document.getElementById('pass').value;
            
            if ((login === 'test1' || login === 'test2') && pass === '12345') {
                currentUser = login;
                document.getElementById('step1').style.display = 'none';
                document.getElementById('step2').style.display = 'block';
                document.getElementById('userName').innerText = login;
            } else {
                alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å');
            }
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã
        async function createRoom() {
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏–º—è –∫–æ–º–Ω–∞—Ç—ã: brief-1802-1530 (–¥–∞—Ç–∞-–≤—Ä–µ–º—è)
            const now = new Date();
            const roomName = `brief-${now.getDate()}${now.getMonth()+1}-${now.getHours()}${now.getMinutes()}`;
            
            document.getElementById('roomLink').style.display = 'block';
            document.getElementById('roomLink').innerHTML = '‚è≥ –°–æ–∑–¥–∞—é –∫–æ–º–Ω–∞—Ç—É...';
            
            try {
                // –°–æ–∑–¥–∞–µ–º –∫–æ–º–Ω–∞—Ç—É —á–µ—Ä–µ–∑ LiveKit API
                const response = await fetch('https://api.livekit.cloud/v1/rooms', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${API_SECRET}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        name: roomName,
                        emptyTimeout: 600
                    })
                });

                if (response.ok) {
                    // –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ–º–Ω–∞—Ç—É (–≤—Å–µ –±—É–¥—É—Ç –∑–∞—Ö–æ–¥–∏—Ç—å –ø–æ –Ω–µ–π)
                    const roomUrl = `${window.location.origin}/room.html?room=${roomName}`;
                    
                    document.getElementById('roomLink').innerHTML = `
                        <div style="color:#4caf50; margin-bottom:10px;">‚úÖ –ö–æ–º–Ω–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞!</div>
                        <div style="margin-bottom:10px;">–°—Å—ã–ª–∫–∞ –¥–ª—è –≤—Å–µ—Ö:</div>
                        <input type="text" value="${roomUrl}" readonly style="width:100%; padding:10px; background:#1e1f25; border:1px solid #f0b90b; color:white; border-radius:5px;">
                        <button onclick="navigator.clipboard.writeText('${roomUrl}')" style="margin-top:10px; background:#f0b90b; padding:10px;">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
                    `;
                } else {
                    document.getElementById('roomLink').innerHTML = '‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç—ã';
                }
            } catch(e) {
                document.getElementById('roomLink').innerHTML = '‚ùå –û—à–∏–±–∫–∞: ' + e.message;
            }
        }
    </script>
</body>
</html>
